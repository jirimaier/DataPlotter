#
# spec file for package @PACKAGE_NAME@
#
@COPYRIGHT_HASH_COMMENT@
#
# This program is free software: you can redistribute it and/or modify it
# under the terms of the GNU General Public License as published by the Free
# Software Foundation, either version 3 of the License, or (at your option)
# any later version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
# more details.

# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>
#
# Please submit bugfixes or comments via
#   @PROJECT_HOME_PAGE@
# issues tracker.
#


Name:           @PACKAGE_NAME@
Version:        @PACKAGE_VERSION@
Release:        @PACKAGE_RELEASE@
Summary:        @PACKAGE_DESCRIPTION@
License:        @PACKAGE_LICENCE@
Group:          Office/Visualization/Other
URL:            @PACKAGE_URL@
Source:         @PACKAGE_SOURCE_ARCHIVE_FILE@
BuildRequires:  cmake
BuildRequires:  gcc-c++
BuildRequires:  pkgconfig
BuildRequires:  pkgconfig(Qt5Widgets)
BuildRequires:  pkgconfig(Qt5Core)
BuildRequires:  pkgconfig(Qt5Gui)
BuildRequires:  pkgconfig(Qt5SerialPort)
BuildRequires:  pkgconfig(Qt5PrintSupport)
BuildRequires:  pkgconfig(Qt5OpenGL)
BuildRequires:  pkgconfig(Qt5Qml)
BuildRequires:  pkgconfig(Qt5QuickWidgets)
BuildRequires:  pkgconfig(Qt5Quick)
BuildRequires:  pkgconfig(Qt5QuickControls2)
BuildRequires:  pkgconfig(Qt5Network)
BuildRequires:  cmake(Qt5LinguistTools)
BuildRequires:  hicolor-icon-theme

%if ! 0%{?suse_version}
BuildRequires:  desktop-file-utils
BuildRequires:  qt5-linguist
BuildRequires:  qt5-qttools
%endif

%if 0%{?suse_version}
BuildRequires:  update-desktop-files
BuildRequires:  libqt5-linguist
%endif

%description
@PACKAGE_LONG_DESCRIPTION@

%prep
%setup -q

%build
%if 0%{?suse_version}
%cmake -DCMAKE_CXX_FLAGS="-Wno-error" -DCMAKE_C_FLAGS="-Wno-error"
%else
%cmake
%endif
%cmake_build

%install
%cmake_install

#desktop icon
%if 0%{?suse_version}
%suse_update_desktop_file -r -i @PACKAGE_NAME@ 'Office Visualization'
%endif

%if 0%{?fedora} || 0%{?rhel} || 0%{?centos}
#desktop-file-validate %{buildroot}/usr/share/applications/@PACKAGE_NAME@.desktop
desktop-file-validate %{buildroot}/usr/share/applications/data-plotter.desktop
%endif

# TODO: this should be generated from CMake
%files
/usr/bin/@PACKAGE_NAME@
#/usr/share/icons/hicolor/scalable/apps/@PACKAGE_NAME@.svg
/usr/share/icons/hicolor/256x256/apps/@PACKAGE_NAME@.png
/usr/share/applications/@PACKAGE_NAME@.desktop
#/usr/share/metainfo/cz.cvut.fel.embedded.@PACKAGE_NAME@.metainfo.xml

%license documentation/license.txt
%doc README.md

%changelog
